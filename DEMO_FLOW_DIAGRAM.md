# ğŸ® Frolic Demo Scripts Flow Diagram

## ğŸ“Š Complete System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸ® FROLIC DEMO SYSTEM ğŸ®                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚  User Runs Demo  â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ ./run_full_demo.sh   â”‚
                              â”‚   (Master Script)    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                         â”‚
                    â–¼                                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ 1. SETUP PHASE       â”‚              â”‚ 2. SIMULATION PHASE      â”‚
         â”‚ setup_demo_data.py   â”‚              â”‚ simulate_gameplay.py     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                   â”‚
                    â”‚                                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
    â”‚               â”‚               â”‚                  â”‚
    â–¼               â–¼               â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create  â”‚   â”‚ Create   â”‚   â”‚ Create   â”‚      â”‚ Users Play   â”‚
â”‚ 100     â”‚   â”‚ 20       â”‚   â”‚ 100+     â”‚      â”‚ Active Games â”‚
â”‚ Users   â”‚   â”‚ Campaignsâ”‚   â”‚ Games    â”‚      â”‚              â”‚
â”‚         â”‚   â”‚          â”‚   â”‚          â”‚      â”‚ Multi-threadedâ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚             â”‚              â”‚                     â”‚
     â”‚             â”‚              â”‚                     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ demo_data_ids.jsonâ”‚
                        â”‚  (Entity IDs)     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ check_demo_results.py â”‚
                        â”‚   (View Stats)        â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ“¦ FROLIC BACKEND SYSTEM ğŸ“¦                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                   Scripts interact via HTTP REST API
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Frolic Application     â”‚
                    â”‚   Port: 8080             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                  â”‚                  â”‚
            â–¼                  â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PostgreSQL  â”‚   â”‚    Redis    â”‚   â”‚    Kafka    â”‚
    â”‚  Port: 5432  â”‚   â”‚  Port: 6379 â”‚   â”‚  Port: 9092 â”‚
    â”‚              â”‚   â”‚             â”‚   â”‚             â”‚
    â”‚ â€¢ Users      â”‚   â”‚ â€¢ Budgets   â”‚   â”‚ â€¢ play-eventsâ”‚
    â”‚ â€¢ Brands     â”‚   â”‚ â€¢ Results   â”‚   â”‚ â€¢ allocationsâ”‚
    â”‚ â€¢ Campaigns  â”‚   â”‚ â€¢ Caching   â”‚   â”‚ â€¢ coupons   â”‚
    â”‚ â€¢ Games      â”‚   â”‚             â”‚   â”‚             â”‚
    â”‚ â€¢ Play Eventsâ”‚   â”‚             â”‚   â”‚             â”‚
    â”‚ â€¢ Coupons    â”‚   â”‚             â”‚   â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸŒ WEB UI MONITORING ğŸŒ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   pgAdmin      â”‚  â”‚ Redis Commanderâ”‚  â”‚   Kafka UI     â”‚
    â”‚ localhost:8083 â”‚  â”‚ localhost:8081 â”‚  â”‚ localhost:8082 â”‚
    â”‚                â”‚  â”‚                â”‚  â”‚                â”‚
    â”‚ View tables    â”‚  â”‚ Browse keys    â”‚  â”‚ View topics    â”‚
    â”‚ Run queries    â”‚  â”‚ Check budgets  â”‚  â”‚ Monitor lag    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ Script Execution Details

### Phase 1: Setup (setup_demo_data.py)

```
Start
  â”‚
  â”œâ”€â–º Check server health
  â”‚
  â”œâ”€â–º Create 100 Users
  â”‚   â””â”€â–º POST /api/v1/admin/users (x100)
  â”‚
  â”œâ”€â–º Create 10 Brands
  â”‚   â””â”€â–º POST /api/v1/admin/brands (x10)
  â”‚
  â”œâ”€â–º Create 20 Campaigns
  â”‚   â”œâ”€â–º 5 past (ended)
  â”‚   â”œâ”€â–º 10 current (active)
  â”‚   â””â”€â–º 5 future (not started)
  â”‚
  â”œâ”€â–º Create 100+ Games (5-6 per campaign)
  â”‚   â”œâ”€â–º Mix of TIME_BASED & FIXED probability
  â”‚   â”œâ”€â–º 20% quick games (end in 1-2 min) âš¡
  â”‚   â”œâ”€â–º Random brand budgets (50-500 coupons)
  â”‚   â””â”€â–º Auto-start active games
  â”‚       â””â”€â–º POST /api/v1/admin/games/{id}/start
  â”‚
  â””â”€â–º Save IDs to demo_data_ids.json
```

### Phase 2: Simulation (simulate_gameplay.py)

```
Start
  â”‚
  â”œâ”€â–º Load demo_data_ids.json
  â”‚
  â”œâ”€â–º Fetch active games
  â”‚   â””â”€â–º GET /api/v1/admin/games
  â”‚
  â”œâ”€â–º Choose simulation mode
  â”‚   â”œâ”€â–º Mode 1: Wave Simulation
  â”‚   â”‚   â””â”€â–º 5 waves Ã— 20 users
  â”‚   â”‚
  â”‚   â”œâ”€â–º Mode 2: Continuous
  â”‚   â”‚   â””â”€â–º 5 min, 10 concurrent users
  â”‚   â”‚
  â”‚   â”œâ”€â–º Mode 3: Stress Test
  â”‚   â”‚   â””â”€â–º 1000 concurrent plays
  â”‚   â”‚
  â”‚   â””â”€â–º Mode 4: Quick Test
  â”‚       â””â”€â–º 1 wave Ã— 10 users
  â”‚
  â”œâ”€â–º For each play:
  â”‚   â”œâ”€â–º POST /api/v1/play
  â”‚   â”‚   â””â”€â–º Get playId
  â”‚   â”‚
  â”‚   â”œâ”€â–º Wait 1.5-3 seconds
  â”‚   â”‚
  â”‚   â””â”€â–º GET /api/v1/play/{playId}/result
  â”‚       â”œâ”€â–º Winner? ğŸ‰
  â”‚       â””â”€â–º Loser? ğŸ˜¢
  â”‚
  â””â”€â–º Display statistics
      â”œâ”€â–º Total plays
      â”œâ”€â–º Winners/Losers
      â”œâ”€â–º Win rate %
      â””â”€â–º Plays per game
```

### Phase 3: Verification (check_demo_results.py)

```
Start
  â”‚
  â”œâ”€â–º GET /api/v1/admin/users
  â”œâ”€â–º GET /api/v1/admin/brands  
  â”œâ”€â–º GET /api/v1/admin/campaigns
  â””â”€â–º GET /api/v1/admin/games
      â”‚
      â””â”€â–º Display summary:
          â”œâ”€â–º Total entities
          â”œâ”€â–º Active games count
          â”œâ”€â–º System health
          â””â”€â–º Quick lookup commands
```

## ğŸ”„ Data Flow During Gameplay

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User plays   â”‚
â”‚ game via     â”‚
â”‚ simulation   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ POST /api/v1/play
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Play API             â”‚
â”‚ (Ingestion)          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Publish to Kafka
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ play-events topic    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Consume
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PlayEventConsumer    â”‚
â”‚ (Allocation Logic)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â–º Redis: Atomic budget decrement
       â”‚   (Lua script)
       â”‚
       â”œâ”€â–º Determine winner/loser
       â”‚
       â”œâ”€â–º PostgreSQL: Save play_event
       â”‚
       â”œâ”€â–º Redis: Save result
       â”‚
       â””â”€â–º Kafka: Publish result
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Result available     â”‚
â”‚ GET /play/{id}/resultâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Quick Reference Table

| Script | Input | Output | Duration |
|--------|-------|--------|----------|
| `setup_demo_data.py` | - | demo_data_ids.json | 30-60 sec |
| `simulate_gameplay.py` | demo_data_ids.json | Console stats | 2-5 min |
| `check_demo_results.py` | - | Console summary | 2 sec |
| `run_full_demo.sh` | - | Complete demo | 3-6 min |

## ğŸ¯ Use Case Flowcharts

### Demo for Stakeholders
```
Start â†’ run_full_demo.sh â†’ Mode 4 (Quick) â†’ Show UIs â†’ Explain results
```

### Load Testing
```
Start â†’ setup_demo_data.py â†’ simulate_gameplay.py (Mode 3) â†’ Monitor metrics
```

### Development Testing
```
Start â†’ setup_demo_data.py â†’ Manual API testing â†’ check_demo_results.py
```

### Continuous Testing
```
Start â†’ setup_demo_data.py â†’ simulate_gameplay.py (Mode 2) â†’ Monitor Redis
```

---

**ğŸ® Now you understand the full flow! Run `./run_full_demo.sh` to see it in action! ğŸ®**
